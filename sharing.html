<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FileUploadTest</title>
    <script>
        function doCopyClipboard(me) {
            var elem = document.getElementById('clipboard');
            elem.select();
            document.execCommand('copy');

            me.disabled = true;
            var textBefore = me.innerText;
            me.innerText = 'OK';
            setTimeout(() => {
                me.disabled = false;
                me.innerText = textBefore;
            }, 1000);
        }

        function doSendClipboard(me) {
            var textBefore = me.innerText;
            me.disabled = true;
            var elem = document.getElementById('clipboard');
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function (e) {
                if (xhr.readyState != 4) {
                    return;
                }
                if (xhr.status == 200) {
                    me.innerText = 'OK';
                    setTimeout(() => {
                        me.innerText = textBefore;
                        me.disabled = false;
                    }, 1000);
                    return;
                }
                alert(xhr.status.toString() + ": " + xhr.responseText);
                me.disabled = false;
            }
            xhr.open('PUT', '/clipboard');
            xhr.send(elem.value);
        }

        function doClearClipboard(me) {
            var elem = document.getElementById('clipboard');
            elem.value = '';
        }
    </script>
</head>

<body>
    <h1> LanGenius </h1>
    
    <fieldset>
        <legend>
            Clipboard
        </legend>
        <textarea name="clipboard" id="clipboard"></textarea>
        <div>
            <button onclick="doCopyClipboard(this)">
                Copy
            </button>
            <button onclick="doSendClipboard(this)">
                Save
            </button>
            <button onclick="doClearClipboard(this)">x</button>
        </div>
    </fieldset>
    
    
    <fieldset>
        <legend>
            Files
        </legend>
        
        <a href="/upload">+ Add </a>
        
        <ol>
            
        </ol>
    </fieldset>
</body>

</html>